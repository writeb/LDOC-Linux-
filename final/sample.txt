
Run cat /etc/motd to see this message again

Before ending an exam run 'history >> ~/history' to save your sequence of step.

This is imitation of Fedora 41 machine.

Important! This machine is not a real Virtual Machine. So, there are lots of features
that are not available. Moreover, some features can differ from the real Linux Machine.

----------------------------------------------

Your working directory is /home/kbtu. Save everything that related to your exam task in
this directory. Before editing config files, creating systemd units, etc, first, copy
those files to the /home/kbtu.

After your time of the exam, this machine will be deleted with all files in it, and only
/home/kbtu is attached to the persistent storage.

----------------------------------------------

Use Rigth mouse button and context menu to copy and paste. If you want to paste something
from the host you need to choose "Copy from browser" and make Ctrl+V to the dialog window.

To copy something to your host machine, you need just select the text and press Ctrl+C.

----------------------------------------------

Main Tips:
1. Do not modify and enable SELinux. It should be disabled.
2. Do not stop shellinaboxd service
3. Do not reboot or shutdown a machine
4. When running a container use "sudo podman" and "--network host" flag.
5. Always use sudo podman and buildah
6. Do not download very large files or execute very resource consuming apps.
7. Use nft to manage firewall


#############################################
#                   TASK                    #
#############################################

Sources:
- https://devhints.io/bash
- https://gist.github.com/LucaRottiers/6a6fb28ec9d98cffb125d722842a87ef

Tasks:

Agenda: You need to make universal scripts to run docker.io/redis:latest image.

1. Create script "prepare_env" which checks that podman is installed and working, and prints
   out a version of podman and fails if podman is not exist or in invalid state (use info
   command), also this script should accept an image name and pull it if it is not exist.
2. Create script "prepare_fs_and_users" which accepts path, which creates a dir by specified path
   if it is not exist and creates "data" subdirectory in it. Also it should create a new user 
   "redisadmin" and makes permissions of read and write to path/data directory.
3. Create script "run_redis" which accepts an image from task 1, path from task 2, and creates a container
   based on image with environment variables "REDIS_PASSWORD=redis", mounts specified path to "/data"
4. Create script "deploy_service" which creates a systemd unit which starts and stops container, enables,
   starts service.
5. Create script "redis_backup" which accepts path from task 2 and makes a backup to "/var/data/backup" 
   directory. Add it to cron or systemd timer.

 